# 無限城使用說明書

## restrict 函式

TODO: 講得更通俗，尤其是參數，以及 body 與 restrict 的一對一關係要說清楚

若不填寫則不檢查。

每個 restrict 函式會吃兩個參數

第一個參數是它所對應項目的 body

第二個參數是整個留言中所有項目組成的一個物件，其鍵爲一個項目的 label，值爲此項目對應的 body

#### 範例
``` javascript
// 假設有兩個項目，一個 label 爲「短句」，一個爲「長句」，要限制短句的字數比長句少，則可
function (cur, all) {
	return all["短句"].length < all["長句"].length;
}

// 以下可限制只能留推或噓
function (cur, all) {
	return ["推", "噓"].includes(cur);
}
// 當然，由於 JavaScript 可以不給沒用到的參數，所以也可寫成
function (cur) {
	return ["推", "噓"].includes(cur);
}
```

## 文章或留言中使用函式

爲了讓使用者擁有更高的彈性，無限城允許使用者使用函式

參數爲一物件，代表整篇文章會暴露給發文者（留言者）的資料
```
// 留言者
{
	title,                 // 文章標題
	date,                  // 發文時間
	articleAuthor,         // 文章作者
	articleContent: {      // 文章內容，只給出 evalType 爲字串的項目
	},
	comments:              // 所有留言，爲一個由本文所有留言組成的陣列，每個留言的格式與 currentComment 相同
	currentComment: {      // 當前留言，只給出非函式的項目
		author,            // 留言作者
		date,              // 留言時間
		content,           // 留言內容，只給出 evalType 爲字串的項目
	},
	currentIndex: index,   // 當前留言在所有留言中的位置，從 0 開始計算
}
// 發文者（比留言者少了currentComment、currentIndex）
{
	title,                 // 文章標題
	date,                  // 發文時間
	articleAuthor,         // 文章作者
	articleContent: {      // 文章內容，只給出 evalType 爲字串的項目
	},
	comments:              // 所有留言，爲一個由本文所有留言組成的陣列，每個留言的格式與 currentComment 相同
}
```

#### 範例

``` javascript
// 以下計算推文中的「推噓」 label 中有多少個推
function (data) {
	let count = 0;
	for (let comment of data.comments) {
		if (comment.content["推噓"] == "推") {
			count = count + 1;
		}
	}
	return `共有 ${count} 個推`
}
```